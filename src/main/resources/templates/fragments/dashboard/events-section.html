<!-- fragments/dashboard/events-section.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<!-- Events Section Fragment -->
<div th:fragment="eventsSection(events, userRole, showEventForm, eventFormError, eventFormData)"
     class="events-panel active">

    <div class="panel-header">
        <!-- Updated panel title to reflect admin view-only access -->
        <h2 class="panel-title"
            th:text="${userRole == 'chief'} ? 'My Events' :
                     (${userRole == 'admin'} ? 'All Events' : 'Ongoing Events')">Events</h2>

        <!-- Create Event Button - Chief only (admins excluded) -->
        <button th:if="${userRole == 'chief'}"
                class="create-event-btn-trigger"
                onclick="showEventModal()">
            Create Event
        </button>
    </div>

    <div class="panel-content">
        <div th:if="${events != null and !events.isEmpty()}" class="events-grid">
            <th:block th:each="event : ${events}">
                <div th:replace="~{fragments/dashboard/event-card :: eventCard(event=${event}, userRole=${userRole})}"></div>
            </th:block>
        </div>

        <div th:if="${events == null or events.isEmpty()}" class="no-events">
            <span th:if="${userRole == 'chief'}">No events created yet. Create your first event!</span>
            <span th:if="${userRole == 'admin'}">No events in system.</span>
            <span th:if="${userRole != 'chief' and userRole != 'admin'}">No ongoing events at the moment.</span>
        </div>
    </div>
</div>

</body>
</html>